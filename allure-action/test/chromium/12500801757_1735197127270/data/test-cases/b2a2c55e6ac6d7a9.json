{"uid":"b2a2c55e6ac6d7a9","name":"Create unique payment link with default_pricing_button","fullName":"tests.tests_generation_unic_admin_links.test_admin_link_generation.TestAdminLinkGeneration#test_admin_create_uniq_payment_link","historyId":"cd93622311de5045edba14f961425da0","time":{"start":1735196920328,"stop":1735196920328,"duration":0},"description":"\n    Test creation of unique payment links with different discount options.\n    Steps:\n    1. Create a QR code\n    2. Log out and log in to admin panel\n    3. Search for user and generate discount URL\n    4. Open generated link and select a plan\n    5. Fill billing information and make payment\n    6. Verify successful payment\n    ","descriptionHtml":"<pre><code>Test creation of unique payment links with different discount options.\nSteps:\n1. Create a QR code\n2. Log out and log in to admin panel\n3. Search for user and generate discount URL\n4. Open generated link and select a plan\n5. Fill billing information and make payment\n6. Verify successful payment\n</code></pre>\n","status":"broken","statusMessage":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","statusTrace":"request = <SubRequest 'sign_up_fixture' for <Function test_admin_create_uniq_payment_link[-default_pricing_button]>>\nfake_email = 'wtl-automation8106554971497@test.com'\n\n    @pytest.fixture(scope=\"function\", params=os.getenv(\"LANGUAGES\", \"\").split(\",\"))\n    @allure.title(\"Sign up\")\n    def sign_up_fixture(request, fake_email):\n        language = request.param\n        base_url = f\"{ENV_URL}{language}/\"\n        email = fake_email\n>       request.instance.main_page.open_page(f\"{base_url}register/\")\n\nconftest.py:99: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nbase/base_page.py:10: in open_page\n    self.page.goto(url)\n/usr/local/lib/python3.12/dist-packages/playwright/sync_api/_generated.py:9002: in goto\n    self._sync(\n/usr/local/lib/python3.12/dist-packages/playwright/_impl/_page.py:553: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n/usr/local/lib/python3.12/dist-packages/playwright/_impl/_frame.py:145: in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n/usr/local/lib/python3.12/dist-packages/playwright/_impl/_connection.py:59: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f0725b17170>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f0724dbf920>\nis_internal = False\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(task, \"__pw_stack__\", inspect.stack())\n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nE           Call log:\nE           navigating to \"None/register/\", waiting until \"load\"\n\n/usr/local/lib/python3.12/dist-packages/playwright/_impl/_connection.py:520: Error","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":21,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1735196871910,"stop":1735196872010,"duration":100},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1735196872010,"stop":1735196872010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1735196872010,"stop":1735196872010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Set up browser: chromium","time":{"start":1735196872010,"stop":1735196872853,"duration":843},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1735196872010,"stop":1735196872010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1735196872010,"stop":1735196872010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Delete user after test","time":{"start":1735196920329,"stop":1735196920329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"fake_email","time":{"start":1735196920329,"stop":1735196920329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Failed test artifacts","time":{"start":1735196920329,"stop":1735196920329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1735196920329,"stop":1735196920355,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1735196920355,"stop":1735196920483,"duration":128},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1735196920483,"stop":1735196920483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Sign up","time":{"start":1735196920483,"stop":1735196920611,"duration":128},"status":"broken","statusMessage":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"\n\n","statusTrace":"  File \"/usr/local/lib/python3.12/dist-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/usr/local/lib/python3.12/dist-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/_pytest/fixtures.py\", line 891, in call_fixture_func\n    fixture_result = next(generator)\n                     ^^^^^^^^^^^^^^^\n  File \"/app/workspace/conftest.py\", line 99, in sign_up_fixture\n    request.instance.main_page.open_page(f\"{base_url}register/\")\n  File \"/app/workspace/base/base_page.py\", line 10, in open_page\n    self.page.goto(url)\n  File \"/usr/local/lib/python3.12/dist-packages/playwright/sync_api/_generated.py\", line 9002, in goto\n    self._sync(\n  File \"/usr/local/lib/python3.12/dist-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/playwright/_impl/_page.py\", line 553, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/playwright/_impl/_frame.py\", line 145, in goto\n    await self._channel.send(\"goto\", locals_to_params(locals()))\n  File \"/usr/local/lib/python3.12/dist-packages/playwright/_impl/_connection.py\", line 59, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/playwright/_impl/_connection.py\", line 520, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[{"name":"page::0","time":{"start":1735196920956,"stop":1735196920964,"duration":8},"status":"broken","statusMessage":"AttributeError: 'Function' object has no attribute 'rep_call'\n","statusTrace":"  File \"/usr/local/lib/python3.12/dist-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/_pytest/fixtures.py\", line 907, in _teardown_yield_fixture\n    next(it)\n  File \"/app/workspace/conftest.py\", line 52, in page\n    if request.node.rep_call.failed:\n       ^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false},{"name":"context::0","time":{"start":1735196920965,"stop":1735196921083,"duration":118},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Delete user after test::0","time":{"start":1735196921083,"stop":1735196921084,"duration":1},"status":"broken","statusMessage":"requests.exceptions.MissingSchema: Invalid URL 'None': No scheme supplied. Perhaps you meant https://None?\n","statusTrace":"  File \"/usr/local/lib/python3.12/dist-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/_pytest/fixtures.py\", line 907, in _teardown_yield_fixture\n    next(it)\n  File \"/app/workspace/conftest.py\", line 127, in delete_user_after_test\n    response = requests.post(DELETE_USER_URL, headers=headers, json=data)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/requests/api.py\", line 115, in post\n    return request(\"post\", url, data=data, json=json, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/requests/api.py\", line 59, in request\n    return session.request(method=method, url=url, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/requests/sessions.py\", line 575, in request\n    prep = self.prepare_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/requests/sessions.py\", line 484, in prepare_request\n    p.prepare(\n  File \"/usr/local/lib/python3.12/dist-packages/requests/models.py\", line 367, in prepare\n    self.prepare_url(url, params)\n  File \"/usr/local/lib/python3.12/dist-packages/requests/models.py\", line 438, in prepare_url\n    raise MissingSchema(\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Failed test artifacts::0","time":{"start":1735196921085,"stop":1735196921087,"duration":2},"status":"broken","statusMessage":"AttributeError: 'Function' object has no attribute 'rep_call'\n","statusTrace":"  File \"/usr/local/lib/python3.12/dist-packages/allure_commons/_allure.py\", line 221, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/dist-packages/_pytest/fixtures.py\", line 907, in _teardown_yield_fixture\n    next(it)\n  File \"/app/workspace/conftest.py\", line 72, in artifacts\n    if request.node.rep_call.failed:\n       ^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set up browser: chromium::0","time":{"start":1735196938373,"stop":1735196938537,"duration":164},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"severity","value":"critical"},{"name":"story","value":"Payment Link Generation"},{"name":"feature","value":"Admin Payment Link Management - chromium"},{"name":"epic","value":"Admin Portal"},{"name":"tag","value":"regression"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.tests_generation_unic_admin_links"},{"name":"suite","value":"test_admin_link_generation"},{"name":"subSuite","value":"TestAdminLinkGeneration"},{"name":"host","value":"bd3659fb8bce"},{"name":"thread","value":"25-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.tests_generation_unic_admin_links.test_admin_link_generation"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"discount_button_locator","value":"'default_pricing_button'"},{"name":"sign_up_fixture","value":"''"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"8b9604f66ffb5223","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196884215,"stop":1735196884215,"duration":0}},{"uid":"3bc1ef1d4cfccfec","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196834319,"stop":1735196834319,"duration":0}},{"uid":"4756801de2d9ad69","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196782894,"stop":1735196782894,"duration":0}},{"uid":"e9912f9b03050884","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196779991,"stop":1735196779991,"duration":0}},{"uid":"2a3136a9fffc1b6","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196747027,"stop":1735196747027,"duration":0}},{"uid":"65e4f52f482c4030","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196701186,"stop":1735196701186,"duration":0}},{"uid":"17e6a6d7b5d08092","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196641001,"stop":1735196641001,"duration":0}},{"uid":"514e64d9c977d1e7","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196614697,"stop":1735196614697,"duration":0}},{"uid":"a0e3f9d00f555f45","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196593356,"stop":1735196593356,"duration":0}},{"uid":"d0f4836635f82d2d","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196569407,"stop":1735196569407,"duration":0}},{"uid":"3103542a7dde8f0e","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196498893,"stop":1735196498893,"duration":0}},{"uid":"2bde2eaa2333d3a8","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196472642,"stop":1735196472642,"duration":0}},{"uid":"b986c5219573885c","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196432409,"stop":1735196432409,"duration":0}},{"uid":"994794f1150f21a9","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196356499,"stop":1735196356499,"duration":0}},{"uid":"61dde9b8b808f58b","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196293712,"stop":1735196293712,"duration":0}},{"uid":"c70a8809e3bac5f6","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196291349,"stop":1735196291349,"duration":0}},{"uid":"ad425a4fdd782293","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196287217,"stop":1735196287217,"duration":0}},{"uid":"4e95ac597da0c76d","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196167169,"stop":1735196167169,"duration":0}},{"uid":"fb0dd0d961580c4d","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196158871,"stop":1735196158871,"duration":0}},{"uid":"37f236146d3268b1","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196157781,"stop":1735196157781,"duration":0}},{"uid":"8df8793ce9fd2721","status":"broken","statusDetails":"playwright._impl._errors.Error: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\nnavigating to \"None/register/\", waiting until \"load\"","time":{"start":1735196154295,"stop":1735196154295,"duration":0}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["regression","smoke"]},"source":"b2a2c55e6ac6d7a9.json","parameterValues":["'default_pricing_button'","''"]}